<html>
    <head>
        <script src='https://d3js.org/d3.v5.min.js'></script>
    </head>
    
    <body onload='init()'>
        <svg width=300 height=300></svg>
        <script>
            async function init() {
                const data = await d3.csv('https://raw.githubusercontent.com/rajlakshmank/rajlakshmank.github.io/master/data/top-10-countries-population-data.csv');
                
                var population = data.map(function(d) {return d.population });
                console.log(data);
            
                // Calculate radius for pie chart from svg setting
                var svg = d3.select("svg"),
                    width = svg.attr("width"),
                    height = svg.attr("height"),
                    radius = Math.min(width, height) / 2,
                    g = svg.append("g")
                            .attr("transform","translate(" + width / 2 + "," + height / 2 + ")");

                var data1 = [2, 24, 8, 10, 15, 16, 17];
                var color = d3.scaleOrdinal(['#4daf4a','#377eb8','#ff7f00','#984ea3','#e41a1c']);

                // Generate the pie
                var pie = d3.pie();

                // Generate the arcs
                var arc = d3.arc()
                            .innerRadius(radius/2)
                            .outerRadius(radius);

                //Generate groups
                var arcs = g.selectAll("arc")
                            .data(pie(population))
                            .enter()
                            .append("g")
                            .attr("class", "arc")

                //Draw arc paths
                arcs.append("path")
                    .attr("fill", function(d, i) {return color(i);})
                    .attr("d", arc);

                /*
                d3.select("body")
                .append("g")
                .selectAll("p")
                .data(data)
                .enter()
                .append("p")
                .html(function(d,i) {return 'Country ' + d.country + ' had ' + d.population_2020 + ' population in year 2020.';});
                */
            } 
        </script>
    </body>
</html>
